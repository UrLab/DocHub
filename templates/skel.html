{%load humanize %}
{% load render_bundle from webpack_loader %}


<!doctype html>
<html class="no-js" lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta property="og:title" content="DocHub" />
    <meta property="og:type" content="website" />
    <meta property="og:image" content="https://dochub.be/static/images/facebook_cover.png" />
    <meta property="og:url" content="https://dochub.be" />
    <meta property="og:description" content="DocHub vous permet de poser des questions aux autres étudiants, échanger vos notes, vos résumés, d'anciens examens et bien plus encore. " />
    <title>{% block title %}DocHub{% endblock %}</title>

    {% if RAVEN_DSN %}
        <script src="https://cdn.ravenjs.com/3.24.0/raven.min.js" crossorigin="anonymous"></script>
        <script>
            Raven.config('{{RAVEN_DSN}}').install()
            Raven.setUserContext({
                email: '{{request.user.email}}',
                id: {{request.user.id}},
                netid: '{{request.user.netid}}',
                inferred_faculty: '{{request.user.inferred_faculty}}',
                inscription_faculty: '{{request.user.inscription_faculty}}',
            })
        </script>
    {% endif %}
    {% render_bundle 'commons' %}
    {% render_bundle 'styles' %}

    <link rel="icon" type="image/png" href="/static/images/favicon.png" />
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400italic,600italic,400,600' rel='stylesheet' type='text/css'>
    <script src="{% url 'js_reverse' %}" type="text/javascript"></script>

    <script src="https://cdn.jsdelivr.net/foundation/5.5.3/js/vendor/jquery.js"></script>
    <script src="https://cdn.jsdelivr.net/foundation/5.5.3/js/vendor/fastclick.js"></script>
    <script src="https://cdn.jsdelivr.net/foundation/5.5.3/js/vendor/jquery.cookie.js"></script>
    <script src="https://cdn.jsdelivr.net/foundation/5.5.3/js/vendor/modernizr.js"></script>
    <script src="https://cdn.jsdelivr.net/foundation/5.5.3/js/vendor/placeholder.js"></script>
    <script src="https://cdn.jsdelivr.net/foundation/5.5.3/js/foundation.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/foundation-icons/3.0/foundation-icons.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/foundation/5.5.3/css/foundation.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/foundation/5.5.3/css/normalize.css">

    {% render_bundle 'main' %}

    {% block header %}
    {% endblock %}
  </head>
  <body>
    <div id="root"></div>
    {% block full-page %}
      <div class="row">
        {% block content %}
        {% endblock %}
      </div>
    {% endblock %}

    {% block script %}{% endblock %}


    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        messageStyle: "none",
        tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}
      });
    </script>
    <script type="text/javascript" async
      src="//cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-MML-AM_CHTML">
    </script>

    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-89986937-2"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      {% if request.user.is_authenticated %}
          gtag('config', 'UA-89986937-2', {
            'user_id': '{{ request.user.id }}',
            'custom_map': {
                'dimension1': 'inscription_faculty',
                'dimension2': 'inferred_faculty',
            },
          });
          gtag('event', 'page_view', {
              'inscription_faculty': '{{request.user.inscription_faculty}}',
              'inferred_faculty': '{{request.user.inferred_faculty}}',
          });
      {% else %}
          gtag('config', 'UA-89986937-2');
      {% endif %}
    </script>
    <!-- Start of Async Drift Code -->
    <script>
    !function() {
      var t;
      if (t = window.driftt = window.drift = window.driftt || [], !t.init) return t.invoked ? void (window.console && console.error && console.error("Drift snippet included twice.")) : (t.invoked = !0,
      t.methods = [ "identify", "config", "track", "reset", "debug", "show", "ping", "page", "hide", "off", "on" ],
      t.factory = function(e) {
        return function() {
          var n;
          return n = Array.prototype.slice.call(arguments), n.unshift(e), t.push(n), t;
        };
      }, t.methods.forEach(function(e) {
        t[e] = t.factory(e);
      }), t.load = function(t) {
        var e, n, o, i;
        e = 3e5, i = Math.ceil(new Date() / e) * e, o = document.createElement("script"),
        o.type = "text/javascript", o.async = !0, o.crossorigin = "anonymous", o.src = "https://js.driftt.com/include/" + i + "/" + t + ".js",
        n = document.getElementsByTagName("script")[0], n.parentNode.insertBefore(o, n);
      });
    }();
    drift.SNIPPET_VERSION = '0.3.1';
    drift.load('dzkrmavg2zw3');
    </script>
    <!-- End of Async Drift Code -->
    <script>
        drift.identify(
            {{request.user.id}},
            {
                email:'{{request.user.email}}',
                startDate: '{{request.user.created|date:"U"}}000',
                inferred_faculty: '{{request.user.inferred_faculty}}',
                inscription_faculty: '{{request.user.inscription_faculty}}',
            }
        );
    </script>
  </body>
</html>
